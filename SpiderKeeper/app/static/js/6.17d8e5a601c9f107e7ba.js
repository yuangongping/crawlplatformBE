webpackJsonp([6],{cgfA:function(e,a,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.container[data-v-ffed9652] {\n  margin: 10px 10px 0px 20px;\n}\n.container .block[data-v-ffed9652] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n    margin: 10px 0px 0px 40px;\n}\n.container .block .el-form-item[data-v-ffed9652] {\n      margin-left: 20px;\n}\n.tips[data-v-ffed9652] {\n  border-left: 4px solid #1a87ec;\n  padding-left: 5px;\n}\n.download[data-v-ffed9652] {\n  display: none;\n}\n",""])},f8aH:function(e,a,r){var t=r("cgfA");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);r("rjj0")("6e9f88a6",t,!0)},sJD7:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=r("Xxa5"),o=r.n(t),n=r("exGp"),l=r.n(n),s=r("EMlb"),i={data:function(){var e=this;return{configForm:{projectName:null,spiderName:null,dbAddress:"172.16.13.22",dbName:"map",dbUserName:"root",dbPassword:"root",bdTableName:null,bdTableComment:null,dataType:"STRUCTURED",items:[{name:"title",value:"文章标题"}]},formRules:{projectName:[{required:!0,message:"字符、数字、_组成！",trigger:"blur"},{pattern:/^[A-Za-z0-9_]+$/,message:"不允许输入空格等特殊符号"}],spiderName:[{validator:function(a,r,t){""===r?t(new Error("请输入爬虫名参数！")):r===e.configForm.projectName?t(new Error("不能与工程名一致")):/^[a-z0-9_]*$/g.test(r)?t():t(new Error("格式只能是小写字符！"))},trigger:"blur",message:"字符、数字、_组成,不能与工程名一致！"}],dbAddress:[{required:!0,message:"字符、数字、_组成！",trigger:"blur"},{pattern:/((25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)\.){3}(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)$/,message:"不允许输入空格等特殊符号"}],dbName:[{required:!0,message:"小写字符、数字、_组成！",trigger:"blur"},{pattern:/^[a-z0-9_]*$/g,message:"不允许输入空格等特殊符号"}],dbUserName:[{required:!0,message:"数据库用户名",trigger:"blur"}],dbPassword:[{required:!0,message:"数据库密码",trigger:"change"}],bdTableName:[{required:!0,message:"小写字符、数字、_组成！",trigger:"blur"},{pattern:/^[a-z0-9_]*$/g,message:"不允许输入空格等特殊符号"}],bdTableComment:[{required:!0,message:"表备注",trigger:"change"}]},downloadurl:""}},methods:{addItem:function(e){e.items.push({name:"",value:""})},removeItem:function(e,a){-1!==a&&e.items.splice(a,1)},fasterScrapy:function(e){var a,r=this;this.$refs.configForm.validate((a=l()(o.a.mark(function a(t){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=13;break}return a.next=3,r.createScript(e);case 3:if(!a.sent){a.next=10;break}n="",n="http://172.16.119.6:5000/download/"+e.projectName,document.querySelector(".download").href=n,document.querySelector(".download").click(),a.next=11;break;case 10:r.$message.error("后端创建scrapy工程出错！");case 11:a.next=14;break;case 13:r.$message.error("请填写正确的配置信息! ");case 14:case"end":return a.stop()}},a,r)})),function(e){return a.apply(this,arguments)}))},createScript:function(e){var a=this;return l()(o.a.mark(function r(){var t;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(s.b)(e);case 3:if(t=a.sent,console.log(t),200!==t.code){a.next=9;break}return a.abrupt("return",!0);case 9:return a.abrupt("return",!1);case 10:a.next=15;break;case 12:return a.prev=12,a.t0=a.catch(0),a.abrupt("return",!1);case 15:case"end":return a.stop()}},r,a,[[0,12]])}))()}}},c={render:function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"container"},[r("el-form",{ref:"configForm",attrs:{model:e.configForm,rules:e.formRules,"label-width":"150px","label-position":"left"}},[r("label",{staticClass:"tips"},[e._v(" 基本信息")]),e._v(" "),r("div",{staticClass:"block"},[r("el-form-item",{attrs:{label:"scrapy工程名",prop:"projectName","label-width":"120px"}},[r("el-input",{staticClass:"input",model:{value:e.configForm.projectName,callback:function(a){e.$set(e.configForm,"projectName",a)},expression:"configForm.projectName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"scrapy蜘蛛名",prop:"spiderName","label-width":"120px"}},[r("el-input",{model:{value:e.configForm.spiderName,callback:function(a){e.$set(e.configForm,"spiderName",a)},expression:"configForm.spiderName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数据存储地址",prop:"dbAddress","label-width":"120px"}},[r("el-input",{model:{value:e.configForm.dbAddress,callback:function(a){e.$set(e.configForm,"dbAddress",a)},expression:"configForm.dbAddress"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数据库名",prop:"dbName","label-width":"120px"}},[r("el-input",{model:{value:e.configForm.dbName,callback:function(a){e.$set(e.configForm,"dbName",a)},expression:"configForm.dbName"}})],1)],1),e._v(" "),r("div",{staticClass:"block"},[r("el-form-item",{attrs:{label:"数据库用户名",prop:"dbUserName","label-width":"120px"}},[r("el-input",{model:{value:e.configForm.dbUserName,callback:function(a){e.$set(e.configForm,"dbUserName",a)},expression:"configForm.dbUserName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数据库密码",prop:"dbPassword","label-width":"120px"}},[r("el-input",{model:{value:e.configForm.dbPassword,callback:function(a){e.$set(e.configForm,"dbPassword",a)},expression:"configForm.dbPassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数据库表名",prop:"bdTableName","label-width":"120px"}},[r("el-input",{model:{value:e.configForm.bdTableName,callback:function(a){e.$set(e.configForm,"bdTableName",a)},expression:"configForm.bdTableName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数据库表备注",prop:"bdTableComment","label-width":"120px"}},[r("el-input",{attrs:{placeholder:"如：裁判文书网-公益诉讼主题数据"},model:{value:e.configForm.bdTableComment,callback:function(a){e.$set(e.configForm,"bdTableComment",a)},expression:"configForm.bdTableComment"}})],1)],1),e._v(" "),r("div",{staticClass:"block"},[r("el-form-item",{attrs:{label:"数据采集类型",prop:"dataType","label-width":"120px"}},[r("el-radio-group",{model:{value:e.configForm.dataType,callback:function(a){e.$set(e.configForm,"dataType",a)},expression:"configForm.dataType"}},[r("el-radio",{attrs:{label:"STRUCTURED"}},[e._v("仅结构化")]),e._v(" "),r("el-radio",{attrs:{label:"UNSTRUCTURED"}},[e._v("仅非结构化")]),e._v(" "),r("el-radio",{attrs:{label:"BOTH"}},[e._v("结构化+非结构化")])],1)],1)],1),e._v(" "),r("label",{staticClass:"tips"},[e._v(" 字段信息")]),e._v(" "),e._l(e.configForm.items,function(a,t){return r("div",{key:t,staticClass:"block"},[r("el-form-item",{attrs:{label:"字段名","label-width":"120px",prop:"items."+t+".name",rules:[{required:!0,message:"小写字符、数字、_组成！",trigger:"blur"},{pattern:/^[a-z0-9_]*$/g,message:"不允许输入空格等特殊符号"}]}},[r("el-input",{model:{value:a.name,callback:function(r){e.$set(a,"name",r)},expression:"param.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"字段备注","label-width":"120px"}},[r("el-input",{model:{value:a.value,callback:function(r){e.$set(a,"value",r)},expression:"param.value"}})],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"button",attrs:{type:"danger",size:"small"},on:{click:function(a){a.preventDefault(),e.removeItem(e.configForm,t)}}},[e._v("删除\n                    ")])],1)],1)}),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(a){e.addItem(e.configForm)}}},[e._v("新增参数")])],1),e._v(" "),r("el-button",{attrs:{id:"addprojectbtn",type:"primary"},on:{click:function(a){e.fasterScrapy(e.configForm)}}},[e._v("快速生成")]),e._v(" "),r("a",{staticClass:"download",attrs:{href:e.downloadurl}},[e._v("下载")])],2)],1)},staticRenderFns:[]};var m=r("VU/8")(i,c,!1,function(e){r("f8aH")},"data-v-ffed9652",null);a.default=m.exports}});